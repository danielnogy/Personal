<!DOCTYPE html>
<html>
<head>
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no" />
    <meta name="description" content="BlazorPlate | Blazor Boilerplate">
    <title>BlazorPlate | Blazor Boilerplate</title>
    <base href="/" />
    <link href="https://fonts.googleapis.com/css?family=Roboto:300,400,500,700&display=swap" rel="stylesheet" />
    <link href="_content/MudBlazor/MudBlazor.min.css" rel="stylesheet" />
    <link href="css/app.css" rel="stylesheet" />
    <link href="css/external-login.css" rel="stylesheet" />
    <link href="manifest.json" rel="manifest" />
    <link href="_content/Syncfusion.Blazor.Themes/material3.css" rel="stylesheet" />
    <!--     <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.2/dist/css/bootstrap.min.css" integrity="sha384-T3c6CoIi6uLrA9TneNEoa7RxnatzjcDSCmG1MXxSR1GAsXEV/Dwwykc2MPK8M2HN" crossorigin="anonymous">-->
    <link href="https://unpkg.com/video.js@7/dist/video-js.min.css"
          rel="stylesheet" />
    <link href="https://unpkg.com/@videojs/themes@1/dist/city/index.css" rel="stylesheet" />
    <link href="https://cdn.jsdelivr.net/npm/videojs-mobile-ui/dist/videojs-mobile-ui.min.js" rel="stylesheet" />
    <link href="https://cdn.jsdelivr.net/npm/videojs-mobile-ui/dist/videojs-mobile-ui.css" rel="stylesheet" />
</head>
<body>
    <div id="app">
        <style>
            @keyframes slide {
                0% {
                    transform: translateX(-25%);
                }

                100% {
                    transform: translateX(25%);
                }
            }

            .mud-wasm {
                animation: slide 3s ease-in-out infinite alternate;
                background-image: linear-gradient(-60deg,#594ae2 50%,#7467ef 50%);
                bottom: 0;
                left: -50%;
                opacity: .5;
                position: fixed;
                right: -50%;
                top: 0;
                z-index: -1
            }

            .mud-wasm-cont {
                left: 50%;
                padding: 10vmin;
                position: fixed;
                text-align: center;
                top: 50%;
                transform: translate(-50%,-50%)
            }
        </style>
        <div style="height:100%;width:100%;margin:0;position:fixed;">
            <div class="mud-wasm"></div>
            <div class="mud-wasm" style="animation-direction:alternate-reverse;animation-duration:4s;"></div>
            <div class="mud-wasm" style="animation-duration:5s;"></div>
            <div class="mud-wasm-cont ">
                <img src="brand-blue.svg" />
            </div>
        </div>
    </div>
    <div id="blazor-error-ui">
        An unhandled error has occurred.
        <a href="" class="reload">Reload</a>
        <a class="dismiss">🗙</a>
    </div>
    <script src="_content/MudBlazor/MudBlazor.min.js"></script>
    <script src="_framework/blazor.webassembly.js"></script>
    <script src="js/utilities.js"></script>
    <script src="js/qrcode.js"></script>
    <script type="text/javascript">
        function generateQrCode(authenticatorUri) {
            new QRCode(document.getElementById("qrCode"),
                {
                    text: authenticatorUri,
                    width: 250,
                    height: 250
                });
        }
    </script>
    <script src="_content/Syncfusion.Blazor.Core/scripts/syncfusion-blazor.min.js" type="text/javascript"></script>
    <script src="https://vjs.zencdn.net/8.6.1/video.min.js"></script>
    <script>
        function alterVideo(id) {
            var video = document.getElementById(id);
            console.log(video);
            // video.currentTime = window.sessionStorage.getItem('timewatched');
            // setInterval(saveTime, 1000);
            var supposedCurrentTime = 0;
            video.addEventListener('timeupdate', function a() {
                if (!video.seeking) {
                    supposedCurrentTime = video.currentTime;
                }
            });
            // prevent user from seeking
            video.addEventListener('seeking', function b() {
                // guard agains infinite recursion:
                // user seeks, seeking is fired, currentTime is modified, seeking is fired, current time is modified, ....
                var delta = video.currentTime - supposedCurrentTime;
                // delta = Math.abs(delta); // disable seeking previous content if you want
                if (delta > 0.01) {
                    video.currentTime = supposedCurrentTime;
                }
            });
            video.addEventListener('ended', function c() {
                // reset state in order to allow for rewind
                supposedCurrentTime = 0;
            });
        }
        function saveTime() {
            window.sessionStorage.setItem("timewatched", vid.currentTime);
        }
        function deAlterVideo(id) {
            var video = document.getElementById(id);

            // video.currentTime = window.sessionStorage.getItem('timewatched');
            // setInterval(saveTime, 1000);
            var supposedCurrentTime = 0;
            if (typeof a === "function") {
                video.removeEventListener('timeupdate', a);
            }
            // prevent user from seeking
            if (typeof b === "function") {
                video.removeEventListener('seeking', b);

            }
            if (typeof c === "function") {
                video.removeEventListener('ended', c);
            }

        }
        function loadVideo(id) {
            document.getElementById(id).load();
        }

    </script>
    <script>
        window.registerVideoCompletionHandler = (dotNetRef, videoId) => {


            const videoPlayer = document.querySelector("video[data-id=\"" + videoId + "\"]");
            console.log('videoplayer cautat' + videoId);
            if (!videoPlayer) {
                console.log('videplayer inexistent:' + videoId);
                return;
            }
            try {
                videoPlayer.addEventListener('ended', function marker() {
                    // Video has ended, mark it as complete
                    dotNetRef.invokeMethodAsync('MarkVideoAsComplete', videoId);
                });
            }
            catch (err) {
                console.log(err.message);
            }
            console.log('videoplayer gasit:' + videoId);

        };
    </script>
    <!--<script>navigator.serviceWorker.register('service-worker.js');</script>-->
</body>
</html>